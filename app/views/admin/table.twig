{% extends 'admin/layout.twig' %}

{% set route_create = app.request.get('_route') ~ '_create' %}
{% set route_edit   = app.request.get('_route') ~ '_update' %}
{% set route_delete = app.request.get('_route') ~ '_delete' %}

{% block content %}
    <div class="row">
        <div class="col-xs-12">
            <div class="box">
                <div class="box-header">
                    <h3 class="box-title">Data Table With Full Features</h3>
                    <div class="pull-right">
                        <a href="{{ path(route_create) }}" class="btn btn-success" title="Add new element"><i class="glyphicon glyphicon-plus"></i></a>
                        <a href="#" class="btn btn-danger" title="Delete selected elements"><i class="glyphicon glyphicon-trash"></i></a>
                    </div>
                </div><!-- /.box-header -->
                <div class="box-body">
                    {% if not items is empty %}
                        <table id="data_table" class="table table-bordered table-hover">
                            <thead>
                                <tr>
                                    {% for field in fields %}
                                        <th>{{field}}</th>
                                    {% endfor %}

                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for item in items %}
                                    <tr id="row_{{ attribute(item, fields|first) }}">
                                        {% for field in fields %}
                                            <td> {{ attribute(item, field) }} </td>
                                        {% endfor %}

                                        <td>
                                            <a href="{{ path(route_edit, {'id': attribute(item, fields|first) }) }}"><i class="fa fa-edit"></i></a>
                                            <a href="javascript:void(0);" onclick="deleteItem('{{ path(route_delete, {'id': attribute(item, fields|first) }) }}');"><i class="fa fa-remove"></i></a>
                                        </td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                            <tfoot>
                                <tr>
                                    {% for field in fields %}
                                        <th>{{field}}</th>
                                    {% endfor %}

                                    <th>Actions</th>
                                </tr>
                            </tfoot>
                        </table>
                    {% else %}
                        {{ 'No result found!' }}
                    {% endif %}
                </div><!-- /.box-body -->
            </div><!-- /.box -->
        </div><!-- /.col -->
    </div><!-- /.row -->
{% endblock %}
